{% extends "base.html" %}
{% block body %}
<div id="content" class="journalist-view-single">
<h2><span class="headline">Read documents</span></h2>
<p><a href="/">Back to latest submissions...</a></p>	
<h3>Collection from: <span class="code-name">{{ codename }}</span></h3>

{% if docs %}
<p><br />Here are the documents available. The documents are stored encrypted for security. To read them, you will need to decrypt them using PGP.</p>
<form action="/bulk" method="post">
<ul id="submissions">
{% for doc in docs %}
<li>
  <input type="checkbox" name="doc_names_selected" value="{{ doc.name }}" />
  {% if doc.name.startswith('reply-') %}
  <i>{{ doc.name }}</i> ({{ doc.size }} bytes sent {{ doc.date }})
  {% else %}
  <a href="/col/{{ sid }}/{{ doc.name }}">{{ doc.name }}</a> ({{ doc.size }} bytes uploaded {{ doc.date }})
  {% endif %}
</li>
{% endfor %}
<input name="csrf_token" type="hidden" value="{{ csrf_token() }}"/>
<input type="hidden" name="sid" value="{{ sid }}" autocomplete="off"/>
<p>
  <button type="submit" name="action" value="download">Download selected</button>
  <button type="submit" name="action" value="delete">Delete selected</button>
  (<span id="select_all">select all</span>, <span id="select_none">select none</span>)</p>
</ul>
</form>
{% else %}
<p><br />No documents to display.</p>
{% endif %}

{% if haskey %}
<p>You can write a secure reply to the person who submitted these documents:</p>
<form action="/reply" method="post" autocomplete="off">
  <input name="csrf_token" type="hidden" value="{{ csrf_token() }}"/>
  <input type="hidden" name="sid" value="{{ sid }}" autocomplete="off"/>
  <textarea name="msg" cols="72" rows="10" autocomplete="off"></textarea><br />
  <button id="reply-button" class="button-custom" type="submit">Submit</button>
</form>
{% else %}
<p>A key is currently being generated, which will enable you to write a secure reply to the person who submitted these documents.  Please check this page again in a few minutes if you would like to write a reply.
{% endif %}
</div>

{% endblock %}
